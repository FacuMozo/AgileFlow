<div class="container">
  <app-generic-card [epica]="epic" (editOutPut)="editDialog(epic)" (deleteOutPut)="deleteDialog(epic)"></app-generic-card>
  <mat-divider></mat-divider>

  <button mat-icon-button class="example-icon" (click)="addStory()">
    <mat-icon>add</mat-icon>
  </button>
  <div>
    <ul>
      <li *ngFor="let story of stories; let i = index">
        <mat-card>
            <mat-card-header [routerLink]="'/my-projects/'+projectId+'/'+epicId+'/'+story._id" class="card-header">
              <h3>{{ story.name }}</h3>
              <p>Owner: {{getOwner(story.owner)}}
              </p>
             </mat-card-header>
            <mat-divider></mat-divider>

            <mat-card-content>
              <ul>
                <li *ngFor="let us of getUsersOfStory(story.assignedTo)">
                  {{us.name.first}}
                </li>
              </ul>
              <p>
                Description: {{ story.description }}
              </p>
            </mat-card-content>

          <div class="card-footer">
            <div class="dates">
              <p>Created at: {{ story.created | date : "shortDate" }}</p>
              <p>Due: {{ story.due | date : "shortDate" }}</p>
              <p>Status: {{ story.status }}</p>
            </div>
            <mat-card-actions>
              <button
                mat-icon-button
                class="example-icon"
                (click)="deleteStory(story)"
              >
                <mat-icon>delete</mat-icon>
              </button>
              <button
                mat-icon-button
                class="example-icon"
                (click)="updateStory(story)"
              >
                <mat-icon>edit</mat-icon>
              </button>
            </mat-card-actions>
          </div>
        </mat-card>
      </li>
    </ul>
    <app-label [text]="'Loading stories...'" *ngIf="stories.length == 0 && !cantStoriesIsZero && !errorGetStories"></app-label>
    <app-label [text]="'No existen stories'" *ngIf="cantStoriesIsZero"></app-label>
    <app-label [text]="'Error to get stories'" *ngIf="errorGetStories"></app-label>
  </div>
</div>
