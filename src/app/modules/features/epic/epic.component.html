<div class="container">

  <p *ngIf="epic == undefined">
    Loading epic...
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
</p>

  <app-generic-card [epica]="epic" *ngIf="epic != undefined" (editOutPut)="editDialog" (deleteOutPut)="deleteDialog"></app-generic-card>
  <mat-divider></mat-divider>


  <app-button [text]="'Add story'" [icon]="'plus'" (buttonEvent)="addStory()"></app-button>

  <div>
    <ul>
      <li *ngFor="let story of stories; let i = index">
        <mat-card *ngIf="story != undefined">
            <mat-card-header [routerLink]="'/my-projects/'+projectId+'/'+epicId+'/'+story._id" class="card-header">
              <h3>{{ story.name }}</h3>
              <app-owner-p [user]="getOwner()">  </app-owner-p>
            </mat-card-header>
            <mat-divider></mat-divider>

            <mat-card-content>
              <p>
                Assigned: {{ story.assignedTo }}
              </p>
              <p>
                {{ story.description }}
              </p>
            </mat-card-content>

          <div class="card-footer">
            <div class="dates">
              <p>Created at: {{ story.created | date : "shortDate" }}</p>
              <p>Due: {{ story.due | date : "shortDate" }}</p>
              <p>Status: {{ story.status }}</p>
            </div>
            <mat-card-actions>
              <button
                mat-icon-button
                class="example-icon"
                (click)="deleteStory(story)"
              >
                <mat-icon>delete</mat-icon>
              </button>
              <button
                mat-icon-button
                class="example-icon"
                (click)="updateStory(story)"
              >
                <mat-icon>edit</mat-icon>
              </button>
            </mat-card-actions>
          </div>
        </mat-card>
      </li>
    </ul>

    <p *ngIf="stories.length == 0 && !cantStoriesIsZero && !errorGetStories">
      Loading stories...
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </p>
    <app-label [text]="'There are no stories in this epic'" *ngIf="cantStoriesIsZero"></app-label>
    <app-label [text]="'Error to get stories'" *ngIf="errorGetStories"></app-label>
  </div>
</div>
